/2011 «О безопасности колесных транспортных средств»</a></li>
				<li><a href="https://base.garant.ru/12192261/53f89421bbdaf741eb2d1ecc4ddb4c33/" target="_blank">Форма типового договора о проведении технического осмотра</a></li>
            </ul>
        </div>
    </div>
</section>

        <!-- Сведения об операторе -->
        <section class="operator-info">
		<div>
            <h1>Сведения об операторе техосмотра</h1>
            <p><strong>№ в реестре:</strong> 10749</p>
            <p><strong>Статус:</strong> Аттестат действителен</p>
            <p><strong>Наименование:</strong> Общество с ограниченной ответственностью Александр и Роман Телевицкий</p>
            <p><strong>Директор:</strong> Телевицкий Роман Евгеньевич</p>
            <p><strong>ИНН:</strong> 1433028015</p>
            <p><strong>ОГРН / ОГРНИП:</strong> 1121433000864</p>
            <p><strong>Юридический адрес:</strong> 678175, Саха /Якутия/ Респ, Мирнинский у, г Мирный, ул Советская, д. 12, оф. 16</p>
</div>
           
	   </section>


        <footer>
            <p>&copy; 2024 Пункт техосмотра ООО «АиРТ». Все права защищены.</p>
        </footer>
    </div>

    <script>
        ymaps.ready(init);

        function init() {
            var map = new ymaps.Map("map", {
                center: [62.552159, 113.982474], // Координаты центра карты (Мирный)
                zoom: 18
            });

            var placemark = new ymaps.Placemark([62.552159, 113.982474], {
                balloonContent: '<strong>Пункт техосмотра ООО «АиРТ»</strong><br>Респ Саха /Якутия/, г Мирный, ш Чернышевское, д 5Г'
            }, {
                preset: 'islands#blueDotIcon'
            });

            map.geoObjects.add(placemark);
        }

        // Скрипт для FAQ
        const faqItems = document.querySelectorAll('.faq-item');
        faqItems.forEach(item => {
            const question = item.querySelector('.faq-question');
            question.addEventListener('click', () => {
                item.classList.toggle('active');
            });
        });


	// JavaScript для работы с формой бронирования
    const API_URL = 'https://teh-mir14.onrender.com'; // URL вашего сервера

    // Получаем элементы
    const formContainer = document.getElementById('formContainer');
    const formToggle = document.getElementById('formToggle');
    const dateInput = document.getElementById('date');
    const timeSelect = document.getElementById('time');
    const bookingForm = document.getElementById('bookingForm');

    // Функция для обновления доступных временных слотов
    async function updateAvailableTimes() {
        const date = dateInput.value;

        // Очищаем текущие опции
        timeSelect.innerHTML = '<option value="">Выберите время</option>';

        // Если дата не выбрана, ничего не делаем
        if (!date) {
            return;
        }

        try {
            const response = await fetch(`${API_URL}/get-available-slots`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ date: date })
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            const availableSlots = data.availableSlots;

            // Добавляем доступные временные слоты в выпадающий список
            availableSlots.forEach(slot => {
                const option = document.createElement('option');
                option.value = slot;
                option.textContent = slot;
                timeSelect.appendChild(option);
            });

        } catch (error) {
            console.error('Ошибка при получении доступных слотов:', error);
            alert('Ошибка при получении доступных слотов. Пожалуйста, попробуйте позже.');
        }
    }

    // Обработчик события для выбора даты
    dateInput.addEventListener('change', updateAvailableTimes);

   // Функция для отправки данных формы на сервер и в Telegram
    bookingForm.onsubmit = async function (event) {
        event.preventDefault(); // Предотвратить стандартное поведение формы

        const formData = new FormData(bookingForm);
        const formObject = {};
        formData.forEach((value, key) => formObject[key] = value);

        try {
            const response = await fetch(`${API_URL}/book-slot`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ date: formObject.date, time: formObject.time })
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();
            if (data.success) {
                // Отправляем данные в Telegram после успешного бронирования
                const token = "6804774061:AAF79b9pf8lW5UXwhpOSx3EMpjjjmTZhGAo";  // Ваш токен бота
                const chatId = "-1002380612626";   // Ваш chat_id канала

                // Формируем сообщение для отправки в Telegram
                const message = `
                    Новая запись на техосмотр:
                    Имя: ${formObject.name}
                    Номер телефона: ${formObject.phone}
                    Вид ТС: ${formObject.vehicleType}
                    Дата: ${formObject.date}
                    Время: ${formObject.time}
                    Подробности: ${formObject.details}
                `;

                const telegramUrl = `https://api.telegram.org/bot${token}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`;

                try {
                    const telegramResponse = await fetch(telegramUrl);
                    if (telegramResponse.ok) {
                        alert("Запись успешно отправлена!");
                    } else {
                        alert("Ошибка при отправке записи в Telegram.");
                    }
                } catch (telegramError) {
                    alert("Ошибка при подключении к Telegram.");
                }
            } else {
                alert(data.message);
            }

        } catch (error) {
            console.error('Ошибка при бронировании слота:', error);
            alert('Ошибка при бронировании слота. Пожалуйста, попробуйте позже.');
        }
    };

    // Добавляем обработчик клика на заголовок для отображения/скрытия формы
    formToggle.addEventListener('click', function () {
        // Убираем анимацию мигания
        formToggle.classList.remove('blinking-text');

        // Переключаем видимость формы
        if (formContainer.style.display === 'none' || formContainer.style.display === '') {
            formContainer.style.display = 'block'; // Разворачиваем форму
        } else {
            formContainer.style.display = 'none'; // Сворачиваем форму
        }
    });
    </script>
</body>
</html>
